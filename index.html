<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="main.css" />
    </head>
    <body onkeydown="keyHandler(event)" style="background-color:black;">
        <center>
    <canvas id="duk" style="width: 500px; height: 500px; border: 1px solid black; background-image:url(background.jpg)"></canvas>
        <div id="score" style="position:fixed; top:200px; left: 505px;"></div>
        <div id="ScoreBottom" style="position: fixed; top: 483px; left: 475px;"></div>
        <script>
            var c = document.getElementById("duk");
            var ctx = c.getContext("2d");
            var key, xDoodle = 50, yDoodle = 20;
            var xcube = 500;
            var xcube2 = 700;
            var xcube3 = 900;
            var xcube4 = 1100;
            var play = 1;
            var point = 0;
            
            alert("Du får inte poäng för dom tre första.")
            
            // Ändrar färg, font och storlek på DIVen "score" och DIVen "point".
            score.style.color = '#D7AA00';
            score.style.fontFamily = 'Arial Rounded MT Bold, Helvetica Rounded, Arial, sans-serif';
            score.style.fontSize = '35px';
            
            ScoreBottom.style.color = '#D7AA00';
            ScoreBottom.style.fontFamily = 'Arial Rounded MT Bold, Helvetica Rounded, Arial, sans-serif';
            ScoreBottom.style.fontSize = '23px';
            
            function DoodleJump(x, y) {
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2*Math.PI);
                ctx.fillStyle = 'green';
                ctx.fill();
            }
            function cube1(x) {
                ctx.beginPath();
                ctx.fillRect(x, 0, 20, 50);
                ctx.fillRect(x, 100, 20, 60);
            }
            function cube2(x) {
                ctx.beginPath();
                ctx.fillRect(x, 0, 20, 80);
                ctx.fillRect(x, 120, 20, 30);
            }
            function cube3(x) {
                ctx.beginPath();
                ctx.fillRect(x, 0, 20, 30);
                ctx.fillRect(x, 70, 20, 80);
            }
            function cube4(x) {
                ctx.beginPath();
                ctx.fillRect(x, 0, 20, 60);
                ctx.fillRect(x, 100, 20, 50);
            }
            
            function minus() {
                xcube = xcube - 1.5;
                xcube2 = xcube2 - 1.5;
                xcube3 = xcube3 - 1.5;
                xcube4 = xcube4 - 1.5;
            }
            
            function keyHandler(event) {
                key = event.keyCode;
                // W
                if(key == 87 && play == 1) {
                    yDoodle = yDoodle - 8;
                // S
                } else if(key == 83 && play == 1) {
                    yDoodle = yDoodle + 8;
                }
            }
            function repaint() {
                ctx.clearRect(0, 0, 400, 700);
                
                DoodleJump(xDoodle, yDoodle);
                
                if(xcube > -701 && play == 1) {
                    minus();
                } else if(xcube < -700) {
                    xcube = 300;
                    xcube2 = 600;
                    xcube3 = 900;
                    xcube4 = 1000;
                }
                // NEDANFÖR: IF Statements om bollen nuddar någon av pipsen.
                // xcube1 översta
                if(xDoodle > xcube - 1 && yDoodle < 55 && xDoodle < xcube + 2 && yDoodle < 55) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube1 under
                } else if(xDoodle > xcube - 1 && yDoodle > 95 && xDoodle < xcube + 2 && yDoodle > 95) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube2 över
                } else if(xDoodle > xcube2 - 1 && yDoodle < 85 && xDoodle < xcube2 + 2 && yDoodle < 85) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube2 under
                } else if(xDoodle > xcube2 - 1 && yDoodle > 120 && xDoodle < xcube2 + 2 && yDoodle > 120) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube3 över
                } else if(xDoodle > xcube3 - 1 && yDoodle < 35 && xDoodle < xcube3 + 2 && yDoodle < 35) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube3 under
                } else if(xDoodle > xcube3 - 1 && yDoodle > 60 && xDoodle < xcube3 + 2 && yDoodle > 60) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube4 över
                } else if(xDoodle > xcube4 -1 && yDoodle < 65 && xDoodle < xcube4 + 2 && yDoodle < 65) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // xcube4 under
                } else if(xDoodle > xcube4 - 1 && yDoodle > 100 && xDoodle > xcube4 + 2 && yDoodle > 100) {
                    document.getElementById('score').innerHTML= "Too bad. Your score is: " + point;
                    play = 0;
                // Ger poäng
                }else if(xDoodle == xcube + 2 || xDoodle == xcube2 + 2 || xDoodle == xcube3 + 2 || xDoodle == xcube4 + 2) {
                    point++;
                }
                // Visar poängen
                document.getElementById('ScoreBottom').innerHTML= point;
                
                // Måla alla pipes.
                cube1(xcube);
                cube2(xcube2);
                cube3(xcube3);
                cube4(xcube4);
            }
                  
            window.setInterval(repaint, 1);
            
        </script>
        </center>
    </body>
</html>